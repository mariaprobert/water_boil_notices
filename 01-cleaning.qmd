---
title: "Cleaning"
---

## Goals of this notebook

The steps we'll take to prepare our data:

- Download the data
- Import it into our notebook
- Clean up data types and columns
- Export the data for next notebook
- Make sure that the updated data that covers the year 2023, aligns with the rest of the data. 

## Setup 

Loading up the libraries: 

```{r}
#| label: setup
#| message: false

library(tidyverse)
library(janitor)
library(readxl)
```


## Downloading Data 

Here I will download the TCEQ data that I obtained from a public records request. The data goes over the counties or jurisdictions affected by water boil notices, start and end date of a water boil notice and the nature of the water boil notice. 

More information about the data can be found on the index page of this notebook. 

Downloaded the file straight into my computer rather than downloading it into this notebook because its in Excel formatting. I dowloaded the data into my data-raw folder. 

## Importing the Data 

Here I am reading the data into my notebook that I already have downloaded to my "data-raw" folder. Then, we're adding our data to a code chunk. For simplicity it will be called "water_boil" which we will then peak at in order to look at what our data looks like in order to clean. We add the clean_names() function so tht we can see our data columns in a clean way. 

```{r}
water_boil <- read_excel("data-raw/water_boil_2018_2022.xlsx") |> clean_names()

water_boil
```

Now we will glimpse the data: 

```{r}
water_boil |> glimpse()
```

Notes for water boil notice cleaning: 
- According to TCEQ, an RN Name is a, A “Regulated Entity” is a person, organization, place, or thing that is of environmental interest to TCEQ where regulatory activities of interest to the Agency occur or have occurred in the past. Examples are a site, facility or license." Each RN is given an 11 digit, which is recorded in the column "RN#" More information on RNs can be found here: https://www.tceq.texas.gov/downloads/remediation/iop/core-data-form-instructions-10400.pdf 
- We have to change both end and start data to a date column instead of chr or dttm
- We have to clean names of columns and data 
- The formatting of the "Jurisdiction" column is a bit weird, why do some entities include this information and others exclude this information? What constitutes a jurisdiction?  

## Fixing the dates 

We want to make sure that our dates are in month, date, year format for consistency in our analysis. We also want to make sure that our notebook recognizes that information as dates. 

** dates is not working 

```{r}
water_boil_dates <- water_boil |>
  mutate(
    end_date_notice = mdy(end_date)
  )

water_boil_dates
```




